<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Editor</title>
    <style type="text/css" media="screen">
        body {
            overflow: hidden;
            margin: 0;
        }

        #editor {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
        }
    </style>
    <script src="ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="ace/ext-language_tools.js"></script>
    <script>
        define("ace/theme/TransparentEditor", ["require", "exports", "module", "ace/lib/dom"], function (require, exports, module) {
            exports.isDark = true;
            exports.cssClass = "ace-transparent-editor";
            exports.cssText = "body {\
                background-color: transparent !important;\
                background-image: none !important;\
                margin: 0;\
                padding: 0;\
                height: 100vh;\
                overflow: hidden;\
            }\
            .ace-transparent-editor {\
                background-color: transparent !important;\
                color: #CCCCCC;\
            }\
            .ace-transparent-editor .ace_marker-layer .ace_active-line {\
                background: rgba(255, 255, 255, 0.2) !important;\
            }\
            .ace-transparent-editor .ace_gutter-active-line {\
                background-color: rgba(57, 57, 57, 0.5);\
            }\
            /* Syntax Highlighting Styles */\
            .ace-transparent-editor .ace_keyword,\
            .ace-transparent-editor .ace_storage,\
            .ace-transparent-editor .ace_storage.ace_type,\
            .ace-transparent-editor .ace_support.ace_type {\
                color: #CC99CC;\
            }\
            .ace-transparent-editor .ace_comment {\
                color: #999999;\
            }\
            .ace-transparent-editor .ace_string {\
                color: #99CC99;\
            }\
            .ace-transparent-editor .ace_variable {\
                color: #F99157;\
            }\
            .ace-transparent-editor .ace_constant {\
                color: #F99157;\
            }\
            .ace-transparent-editor .ace_operator {\
                color: #66CCCC;\
            }\
            .ace-transparent-editor .ace_entity.ace_name.ace_function {\
                color: #6699CC;\
            }\
            ";

            var dom = require("../lib/dom");
            dom.importCssString(exports.cssText, exports.cssClass);
        });
    </script>
</head>
<body style="background-color: #25282c">
    <div id="editor"></div>

    <script>
        ace.require("ace/ext/language_tools");
        var editor = ace.edit("editor");
editor.setTheme("ace/theme/tomorrow_night_eighties");
        editor.session.setMode("ace/mode/lua");
        editor.setOption("enableLiveAutocompletion", true);
        editor.setOption("cursorStyle", "smooth");
        editor.setShowPrintMargin(false);
        editor.renderer.setOption('wrap', true);
        editor.session.setOption("useSoftTabs", true);
        editor.session.setOption("tabSize", 4);
        document.getElementById('editor').style.fontSize = '13px';

        // Fix text
        function normalizeText(text) {
            return text
                .replace(/\r\n/g, '\n')
                .replace(/\r/g, '\n')
                .replace(/\t/g, '    ')
                .trim();
        }

        function unescapeText(text) {
            return text
                .replace(/\\n/g, '\n')
                .replace(/\\"/g, '"')
                .replace(/\\\\/g, '\\')
                .replace(/\\t/g, '\t')
                .replace(/\\r/g, '\n');
        }

        // GetText and SetText functions
        window.GetText = function () {
            return normalizeText(editor.getValue());
        };

        window.SetText = function (x) {
            editor.setValue(unescapeText(x), -1);
        };

        window.ClearText = function () {
            editor.setValue("");
        };

        document.oncontextmenu = function () {
            return false;
        };
    </script>
</body>
</html>
